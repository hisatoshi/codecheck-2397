## コードがどのように実行されるのか
## チャレンジに解答するうえで出くわした問題
## どのようにその問題を解決したか
## その他


## 0. デプロイ先のサーバ(Heroku)
https://hisatoshi-app.herokuapp.com/

## 1. ファイルの機能割り当て説明．
基本問題では，botクラスがオブジェクトパターンで書かれていました．
個人的に，リビーリングモジュールパターンが好きなので，こちらに書き直しました．

### server.js
基本的に手を加えておりませんが，
portの設定を
old : port = 3000;
new : port = process.env.PORT || 3000;
に変更しました．

これは，元のままだと，herokuにて，エラーが発生し，うまく動かなかったためです．

### connection.js
server.jsに通信の汚い部分を書きたくなかったので，こちらにまとめました．
このオブジェクトを通じて，クライアントとの通信を行います．

### bot.js
このファイルは，ボットのクラスです．
ボットそれ自体の機能は，botActivity.jsに分けたあります．
今回は，時間の関係で書くことが出来ませんでしたが，bot自体が状態(1)を持つ場合，
このクラスにその状態を表すオブジェクト（もしくは変数）を追加すると，きれいになるかなって思います．
 (1)たとえば，ユーザ名を登録できたとき，ユーザに対するbotの記憶等を状態として与えたい．
 記憶によって振る舞いを替えるとか．


### botActivityList.js
一番，考えた部分です．
どうすれば，拡張性を保ち，実装を行えるかを考えました．
発想のきっかけは，学校の演習で行ったProlog(論理型言語)でした．
この形で実装することで，if/elseの乱立するコードを書かずに済みました．

### activities/*
実際のbotの挙動を記述したファイル群です．
botの機能を追加する場合，上記botActivityList.jsのリストに追加した後，実際の挙動をこちらに，新しいファイルをつくって記述するという構造にしました．既存のファイルをほとんど触ることなく，追加実装可能な仕様です．

また，db.jsに限って言えば，もっとセンスの良い実装方法があったはずだと，少し心残りです．

## コーディングで気にしたこと
基本的に，関数型っぽい書き方が，自分は好みなので，その記述が多く目立ちます．
コードを書きながら，この部分はあの高階関数を用いれば，もっとセンスよく書けるかもっていうのを考えています．
しかし，探索を行う際は，途中でbreakを行い，処理を中断するために，あえてcライクなfor文を用いています．

##　追加機能
追加機能は，以下の単純なコマンドです．

`bot rec {任意の文字列}`

もし，この文字列を初めてbotに渡した場合，あなたが初めて渡したという旨を返します．
もし，以前に同様の文字列を渡したユーザが存在したら，過去何人のユーザが渡したかを伝える旨を返します．

この機能の発想点は，webサービスのアカウントIDによります．
アカウントIDは，重複を許さないものです．
そして，基本的に早い者勝ちで，決まっていきます．
自分のお気に入りのIDが使われていて悲しい思いをした経験を持つ人は少なくないはずです．

この機能は，そういったユーザの気持ちに対し，早い者勝ちで任意の文字列(アカウント)を投稿しまくるものです．
そうして，どんどん登録していくことが，なんか楽しいです．

また，仮に被ってしまったとしても，自分とおなじ文字列を投稿したユーザ数を知ることで，「おぉ，こんなに自分と同じ文字列を投稿した人がいるのか」と，スクリーン越しにシンパシーを感じることもできます．

とても楽しいです．
